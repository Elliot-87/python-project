{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>Beneficiary Register - 2025</title>
  <style>
      @page {
          size: A4 landscape;
          margin: 10mm;
      }

      body {
          font-family: 'DejaVu Sans', Arial, sans-serif;
          font-size: 8pt;
          margin: 0;
          padding: 0;
          line-height: 1.2;
          color: #333;
      }

      .header-container {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: 12px;
          padding: 8px 0;
          border-bottom: 3px double #2c3e50;
      }

      .logo-section {
          flex: 0 0 auto;
          text-align: center;
          padding: 0 15px;
      }

      .logo-placeholder {
          width: 80px;
          height: 80px;
          background: linear-gradient(135deg, #3498db, #2c3e50);
          border-radius: 8px;
          display: flex;
          align-items: center;
          justify-content: center;
          color: white;
          font-weight: bold;
          font-size: 9pt;
          margin: 0 auto 5px;
          border: 2px solid #2c3e50;
      }

      .logo-placeholder img {
          width: 70px;
          height: 70px;
          object-fit: contain;
      }

      .organization-section {
          flex: 1;
          text-align: center;
          padding: 0 20px;
      }

      .organization-name {
          font-size: 16pt;
          font-weight: bold;
          color: #2c3e50;
          margin: 0;
          letter-spacing: 1px;
      }

      .organization-subtitle {
          font-size: 11pt;
          color: #e74c3c;
          margin: 2px 0;
          font-weight: 600;
      }

      .organization-details {
          font-size: 9pt;
          color: #7f8c8d;
          margin: 3px 0;
      }

      .document-info {
          flex: 0 0 auto;
          text-align: right;
          padding: 0 15px;
          border-left: 1px solid #bdc3c7;
      }

      .document-title {
          font-size: 12pt;
          font-weight: bold;
          color: #2c3e50;
          margin: 0;
      }

      .document-date {
          font-size: 9pt;
          color: #7f8c8d;
          margin: 3px 0;
      }

      table {
          width: 100%;
          border-collapse: collapse;
          table-layout: fixed;
          margin-top: 5px;
      }

      th, td {
          border: 1px solid #95a5a6;
          padding: 5px 4px;
          vertical-align: top;
          word-wrap: break-word;
          line-height: 1.1;
      }

      th {
          background: linear-gradient(to bottom, #ecf0f1, #bdc3c7);
          text-align: center;
          font-weight: bold;
          font-size: 7.5pt;
          color: #2c3e50;
          padding: 6px 4px;
      }

      /* Column widths */
      th:nth-child(1), td:nth-child(1) { width: 3%; }
      th:nth-child(2), td:nth-child(2) { width: 9%; }
      th:nth-child(3), td:nth-child(3) { width: 9%; }
      th:nth-child(4), td:nth-child(4) { width: 10%; }
      th:nth-child(5), td:nth-child(5) { width: 5%; }
      th:nth-child(6), td:nth-child(6) { width: 5%; }
      th:nth-child(7), td:nth-child(7) { width: 12%; }
      th:nth-child(8), td:nth-child(8) { width: 8%; }
      th:nth-child(9), td:nth-child(9) { width: 5%; }
      th:nth-child(10), td:nth-child(10) { width: 8%; }
      th:nth-child(11), td:nth-child(11) { width: 6%; }
      th:nth-child(12), td:nth-child(12) { width: 6%; }
      th:nth-child(13), td:nth-child(13) { width: 10%; }
      th:nth-child(14), td:nth-child(14) { width: 5%; }
      th:nth-child(15), td:nth-child(15) { width: 5%; }

      .center { text-align: center; }
      .left { text-align: left; }
      .compact { padding: 3px 2px; }

      .footer {
          margin-top: 10px;
          text-align: center;
          font-size: 7pt;
          border-top: 1px solid #bdc3c7;
          padding-top: 4px;
          color: #7f8c8d;
      }
      
      tbody tr:nth-child(even) {
          background-color: #f8f9fa;
      }

      @media print {
          body { margin: 0; padding: 0; }
          .header-container { border-bottom: 3px double #000; }
          th { background: #f0f0f0 !important; }
          tbody tr:nth-child(even) { background-color: #f8f8f8 !important; }
      }
  </style>
</head>
<body>
<!-- Debug Section - Remove after testing -->

  <!-- Header -->
  <div class="header-container">
      <div class="logo-section">
    <div class="logo-placeholder">
       <div class="logo-container">
    <img src="{% static 'images/logo.png' %}" alt="Company Logo" style="max-height: 80px;">

</div>
    </div>
    <div style="font-size: 7pt; color: #7f8c8d;">Official Seal</div>
</div>
      
      <div class="organization-section">
          <h1 class="organization-name">GAUTENG PROVINCE</h1>
          <div class="organization-subtitle">BELIEVERS CARE SOCIETY</div>
          <div class="organization-details">ADVISORY & REFERRALS SERVICES</div>
          <div class="organization-details">2025 BENEFICIARY REGISTER</div>
      </div>
      
      <div class="document-info">
          <div class="document-title">PDF PREVIEW</div>
          <div class="document-date">Generated: {% now "F j, Y" %}</div>
          <div class="document-ref">Ref: BCS-PREVIEW-2025</div>
      </div>
  </div>

  <!-- Table -->
  <table>
      <thead>
          <tr>
              <th>No.</th>
              <th>Names</th>
              <th>Surname</th>
              <th>ID No./DOB</th>
              <th>Gender</th>
              <th>Disability</th>
              <th>Address</th>
              <th>TISH Area</th>
              <th>Ward</th>
              <th>Contact</th>
              <th>Race</th>
              <th>Recovering</th>
              <th>Social Grant</th>
              <th>Cooperative</th>
              <th>Sign</th>
          </tr>
      </thead>
      <tbody>
          {% for entry in entries %}
          <tr>
              <td class="center compact">{{ forloop.counter }}</td>
              <td class="left">{{ entry.names|default:"-" }}</td>
              <td class="left">{{ entry.surname|default:"-" }}</td>
              <td class="left">{{ entry.id_no_or_dob|default:"-" }}</td>
              <td class="center compact">{{ entry.gender|default:"-" }}</td>
              <td class="center compact">{{ entry.disability|yesno:"Yes,No" }}</td>
              <td class="left">{{ entry.physical_address|default:"-"|truncatewords:4 }}</td>
              <td class="left">{{ entry.tish_area|default:"-" }}</td>
              <td class="center compact">{{ entry.ward_no|default:"-" }}</td>
              <td class="left">{{ entry.contact_number|default:"-" }}</td>
              <td class="left">{{ entry.race|default:"-" }}</td>
              <td class="center compact">{{ entry.recovering_service_user|yesno:"Yes,No" }}</td>
              <td class="left">{{ entry.social_grant|default:"-" }}</td>
              <td class="center compact">{{ entry.cooperative_member|yesno:"Yes,No" }}</td>
              <td class="center compact">{% if entry.signature_image %}✓{% else %}—{% endif %}</td>
          </tr>


          
          {% empty %}
          <tr>
              <td colspan="15" class="center" style="color:#999; padding:15px;">
                  No beneficiary records found
              </td>
          </tr>
          {% endfor %}
      </tbody>
  </table>

  <!-- Footer -->
  <div class="footer">
      BELIEVERS CARE SOCIETY • PDF PREVIEW • {% now "F j, Y \a\t H:i" %}
  </div>

  <!-- Debug info (remove in production) -->
  <div style="display: none; color: red; font-size: 8pt;">
      Template: pdf_preview.html | Entries: {{ entries.count }} | Time: {% now "H:i:s" %}
  </div>

</body>
</html>